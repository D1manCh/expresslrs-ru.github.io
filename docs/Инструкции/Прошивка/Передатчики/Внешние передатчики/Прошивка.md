
!!! note "Примечание"
    Эта инструкция подходит для всех внешних ELRS передатчиков на 2.4Ghz/900Mhz, которые устанавливаются во внешний слот аппаратуры.

!!! danger "Внимание"
    Если вы впервые обновляете свой **передатчик** через WiFi с 2.х/1.x прошивки, на 3.x прошивку, для начала вам нужно прошить его на версию 2.5.2, после этого прошить специальную [Repartitioner](https://github.com/ExpressLRS/repartitioner) прошивку [скачать тут](https://github.com/ExpressLRS/repartitioner/releases/download/1.0/repartitioner.bin) (нажать правой кнопкой, сохранить как). Оно будет ругаться на Target Mismatch (не совпадение таргетов), просто жмите `Flash Anyway`. 
    Только после этого можно закидывать 3.х прошивку по WiFi, точка поднимется сама, в Lua заходить не надо. 
    
    Видео Бардвела можно глянуть [тут](https://www.youtube.com/watch?v=2kcRi1cHejM).

    Можно шиться без всех этих танцев с бубном просто по USB

## Прошивка по WiFi

- Device Category: 
    - Выбираем фирму вашего передатчика

- Device:
    - Выбираем модель вашего передатчика, например `HM ES24TX Pro Series 2400 TX` - для HappyModel PRO 

<figure markdown>
![via WiFi](/assets/images/Method_TX_WiFi.png)
<figcaption>Прошивка по WiFi</figcaption>
</figure>

!!! note "Примечание"
    Методы прошивки описанные ниже работают только в том случае, если ваши модули уже на 2.x прошивке. Для модулей на древних 1.х прошивках вам придется обновить его по USB.

### Метод через браузер

Выбрав правильный таргет и [Параметры сборки](/Quick Start/Параметры сборки), cоберите кнопкой `Build` вашу прошивку через ExpressLRS Configurator.

<figure markdown>
![Build]
</figure>


После того как строчки в окне конфигуратора успешно пробегут, откроется проводник, где будет файл `Название_TX-<версия>.bin`.
Не закрывайте это окно, а сохраните этот файл в удобное место для последующей загрузки, например скиньте в сохраненки Telegram.

Следующий шаг потребует [Lua скрипт ELRS](https://github.com/ExpressLRS/ExpressLRS/blob/3.x.x-maintenance/src/lua/elrsV3.lua?raw=true) (правой кнопкой, сохранить как *.lua). Скачайте и закиньте на флешку аппы, в папку `/Scripts/Tools`.
Чтобы открыть скрипт на аппаратуре зажмите кпопку `SYS` и выберите `ExpressLRS`.

<figure markdown>
![Lua Script](/assets/images/lua1.jpg)
</figure>

<figure markdown>
![Lua Script T16](/assets/images/lua2.jpg)
</figure>

Если скрипт не открывается и висит на `Loading...`, проверь что в модели выставлен External CRSF.

![ExternalRF BW](/assets/images/txprep-bw-externalRF.jpg)

<figure markdown>
![Lua3](/assets/images/lua3.jpg)
</figure>

Выберите пункт `Wifi Connectivity` в скрипте, а потом нажмите `Enable Wifi`. Нажмите ОК еще раз, чтобы включить WiFI на передатчике. Подключитесь к сети `ExpressLRS TX` с паролем `expresslrs`.
<figure markdown>
![WiFi Hotspot](/assets/images/WifiHotspotTX.png)
</figure>

Откройте браузер и перейдите на http://10.0.0.1/, откроется красивый сайт где вам нужна будет кнопка `Choose File`, выберите ранее полученный из конфигуратора файл `Название_TX-<версия>.bin` и нажмите `Update`.

После того как файл загрузится появится зеленое окно подтверждения что все хорошо, либо ошибка. Если ругается на таргет, убедитесь что он верный и нажмите `Flash Anyway`
Проверьте что версия внизу скрипта или на WiFi странице поменялась на ту что вы прошивали.

### Метод через домашнюю сеть и браузер

Выбрав правильный таргет и [Параметры сборки](/Quick Start/Параметры сборки), cоберите кнопкой `Build` вашу прошивку через ExpressLRS Configurator.

<figure markdown>
![Build]
</figure>

После того как строчки в окне конфигуратора успешно пробегут, откроется проводник, где будет файл `Название_TX-<версия>.bin`.
Не закрывайте это окно, а сохраните этот файл в удобное место для последующей загрузки, например скиньте в сохраненки Telegram.

Используя [Lua скрипт ELRS](https://github.com/ExpressLRS/ExpressLRS/blob/3.x.x-maintenance/src/lua/elrsV3.lua?raw=true) (правой кнопкой, сохранить как *.lua). Выберите `Wifi Connectivity` и включите WiFi кнопкой `Enable WiFi`. Если во время предыдущей прошивки вы прописали SSID своего домашнего WiFi или добавили его подключившись по `10.0.0.1`, то теперь модуль подключается к вашему роутеру, вместо раздачи точки.

!!! danger "Внимание"
    После того как вы подключите свой TX/RX модуль к домашней WiFi сети он всегда будет подключаться к вашему роутеру. Он не будет создавать привычную WiFi точку, пока видит ваш домашний WiFi. Если вы не можете найти устройство в локальной сети, выключите роутер и подключитесь первым методом, далее уберите домашнюю WiFi сеть.

Используя браузер, перейдите по ссылке http://elrs_tx.local и вы попадете на WiFi страницу модуля. Найдите пункт Firmware Update, как показано ниже:

<figure markdown>
![Firmware Update](/assets/images/web-firmwareupdate.png)
</figure>

!!! note "Примечание"
    Иногда роутеры не присваивают устройствам dns имя (http://elrs_tx.local), если этот сайт не доступен вам придется сходить в амдинку вашего роутера и посмотреть какой ip получило устройство ExpressLRS, и перейти по этому ip.

Выберите ранее полученный из конфигуратора файл `Название_TX-<версия>.bin` и нажмите `Update`.

После того как файл загрузится появится зеленое окно подтверждения что все хорошо, либо ошибка. Если ругается на таргет, убедитесь что он верный и нажмите `Flash Anyway`
Проверьте что версия внизу скрипта или на WiFi странице поменялась на ту что вы прошивали.

### Метод через домашнюю сеть и конфигуратор

Используя [Lua скрипт ELRS](https://github.com/ExpressLRS/ExpressLRS/blob/3.x.x-maintenance/src/lua/elrsV3.lua?raw=true) (правой кнопкой, сохранить как *.lua). Выберите `Wifi Connectivity` и включите WiFi кнопкой `Enable WiFi`. Если во время предыдущей прошивки вы прописали SSID своего домашнего WiFi или добавили его подключившись по `10.0.0.1`, то теперь модуль подключается к вашему роутеру, вместо раздачи точки.

Теперь ваше устройство будет видно внизу ExpressLRS Configurator, если выбран метод прошивки WiFi
<figure markdown>
![via WiFi](/assets/images/Method_TX_WiFi.png)
<figcaption>Прошивка по WiFi</figcaption>
</figure>

!!! note "Примечание"
    Иногда роутеры не присваивают устройствам dns имя (http://elrs_tx.local), если этот сайт не доступен вам придется сходить в амдинку вашего роутера и посмотреть какой ip получило устройство ExpressLRS, и вбить его вместо порта внизу ExpressLRS Configurator.

В ExpressLRS Configurator выбрав правильный таргет и [Параметры сборки](/Quick Start/Параметры сборки), нажмите `Build and Flash` и прошейте передатчик. При успешной прошивке вы увидите результат как на картинке ниже:

<figure markdown>
![Build & Flash]
</figure>

<figure markdown>
![Wifi Update Log](/assets/images/WifiUpdateLog.png)
</figure>

Проверьте что версия внизу скрипта или на WiFi странице поменялась на ту что вы прошивали.

## Прошивка по USB/UART

- Device Category: 
    - Выбираем фирму вашего передатчика

- Device:
    - Выбираем модель вашего передатчика, например `HM ES24TX Pro Series 2400 TX` - для HappyModel PRO 

<figure markdown>
![via UART](/assets/images/Method_TX_UART.png)
<figcaption>Flashing via UART</figcaption>
</figure>

Если у вас модуль от HappyModel/BetaFPV перед прошивкой по USB нужно убедится что джамперы либо дип-свитчи стоят в правильном режиме для прошивки передатчика `Tx Module Flashing`:

??? info "Открыть картинки"
    <figure markdown>
    ![JumperFS](/assets/images/jumper-es24Micro.png)
    <figcaption>ES24TX Full Size, Non Pro</figcaption>
    </figure>

    <figure markdown>
    ![JumperLite](/assets/images/jumper-es24Lite.png)
    <figcaption>ES24TX Lite, for Jumper T-Lite</figcaption>
    </figure>

    <figure markdown>
    ![DipswitchSlim](/assets/images/dipswitch-es24slim.png)
    <figcaption>ES24TX Slim, Iron Man</figcaption>
    </figure>

    <figure markdown>
    ![DipswitchSlimPro](/assets/images/dipswitch-es24slimPro.png)
    <figcaption>ES24TX Slim Pro</figcaption>
    </figure>

    <figure markdown>
    ![DipswitchPro](/assets/images/dipswitch-Pro.png)
    <figcaption>ES24TX Pro 1W</figcaption>
    </figure>

Attach your USB cable to the module and your computer. [CP210x Drivers](https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers) will have to be installed for this to work properly (Windows). Make sure your computer recognizes the module as a CP210x USB-to-UART Bridge device (check Device Manager; or the Actions section of the ExpressLRS Configurator should show another Com Port with Silabs CP210x designation), otherwise, this method will not work.

!!! tip "Important"
    Check Device Manager on your Windows system before proceeding. Ensure the correct drivers are installed. Some Linux distros might also need drivers. The drivers can be downloaded [here](https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers).

<figure markdown>
![CP210x Drivers](/assets/images/CP210xDriverDownload.png)
</figure>

Using the ExpressLRS Configurator with the correct Target selected and [Firmware Options] set, hit **Build & Flash**. Wait for the process to finish, and you should be greeted with the "Success" message.

<figure markdown>
![Build & Flash]
</figure>

Assemble the module back together (ensure the module PCB is not loose from its mounting points) and attach it to your radio module bay and verify the version and hash in the main screen of the ExpressLRS Lua script.

[ExpressLRS Lua script]: https://github.com/ExpressLRS/ExpressLRS/blob/3.x.x-maintenance/src/lua/elrsV3.lua?raw=true
[Build]: /assets/images/Build.png
[Build & Flash]: /assets/images/BuildFlash.png
[Firmware Options]: ../firmware-options.md
[Radio Preparation]: tx-prep.md
