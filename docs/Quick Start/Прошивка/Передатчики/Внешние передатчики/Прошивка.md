
!!! note "Примечание"
    Эта инструкция подходит для всех внешних ELRS передатчиков на 2.4Ghz/900Mhz, которые устанавливаются во внешний слот аппаратуры.

!!! danger "Внимание"
    Если вы впервые обновляете свой **передатчик** через WiFi с 2.х/1.x прошивки, на 3.x прошивку, для начала вам нужно прошить его на версию 2.5.2, после этого прошить специальную [Repartitioner](https://github.com/ExpressLRS/repartitioner) прошивку [скачать тут](https://github.com/ExpressLRS/repartitioner/releases/download/1.0/repartitioner.bin) (нажать правой кнопкой, сохранить как). Оно будет ругаться на Target Mismatch (не совпадение таргетов), просто жмите `Flash Anyway`. 
    Только после этого можно закидывать 3.х прошивку по WiFi, точка поднимется сама, в Lua заходить не надо. 
    
    Видео Бардвела можно глянуть [тут](https://www.youtube.com/watch?v=2kcRi1cHejM).

    Можно шиться без всех этих танцев с бубном просто по USB

## Прошивка по WiFi

- Device Category: 
    - Выбираем фирму вашего передатчика

- Device:
    - Выбираем модель вашего передатчика, например `HM ES24TX Pro Series 2400 TX` - для HappyModel PRO 

<figure markdown>
![via WiFi](/assets/images/Method_TX_WiFi.png)
<figcaption>Прошивка по WiFi</figcaption>
</figure>

!!! note "Примечание"
    Методы прошивки описанные ниже работают только в том случае, если ваши модули уже на 2.x прошивке. Для модулей на древних 1.х прошивках вам придется обновить его по USB.

### Метод через браузер

Выбрав правильный таргет и [Параметры сборки](/Quick Start/Параметры сборки), cоберите кнопкой `Build` вашу прошивку через ExpressLRS Configurator.

<figure markdown>
![Build]
</figure>


После того как строчки в окне конфигуратора успешно пробегут, откроется проводник, где будет файл `Название_TX-<версия>.bin`.
Не закрывайте это окно, а сохраните этот файл в удобное место для последующей загрузки, например скиньте в сохраненки Telegram.

Следующий шаг потребует [Lua скрипт ELRS](https://github.com/ExpressLRS/ExpressLRS/blob/3.x.x-maintenance/src/lua/elrsV3.lua?raw=true) (правой кнопкой, сохранить как *.lua). Скачайте и закиньте на флешку аппы, в папку `/Scripts/Tools`.
Чтобы открыть скрипт на аппаратуре зажмите кпопку `SYS` и выберите `ExpressLRS`.

<figure markdown>
![Lua Script](/assets/images/lua1.jpg)
</figure>

<figure markdown>
![Lua Script T16](/assets/images/lua2.jpg)
</figure>

Если скрипт не открывается и висит на `Loading...`, проверь что в модели выставлен External CRSF.

![ExternalRF BW](/assets/images/txprep-bw-externalRF.jpg)

<figure markdown>
![Lua3](/assets/images/lua3.jpg)
</figure>

Выберите пункт `Wifi Connectivity` в скрипте, а потом нажмите `Enable Wifi`. Нажмите ОК еще раз, чтобы включить WiFI на передатчике. Подключитесь к сети `ExpressLRS TX` с паролем `expresslrs`.
<figure markdown>
![WiFi Hotspot](/assets/images/WifiHotspotTX.png)
</figure>

Откройте браузер и перейдите на http://10.0.0.1/, откроется красивый сайт где вам нужна будет кнопка `Choose File`, выберите ранее полученный из конфигуратора файл `Название_TX-<версия>.bin` и нажмите `Update`.

После того как файл загрузится появится зеленое окно подтверждения что все хорошо, либо ошибки. Если ругается на таргет, убедитесь что он верный и нажмите `Flash Anyway`
Проверьте что версия внизу скрипта поменялась на ту что вы прошивали.

### Метод через домашнюю сеть и браузер

With the correct target selected and [Firmware Options] set, **Build** your firmware using the ExpressLRS Configurator.

<figure markdown>
![Build]
</figure>

Once it's done, it should open the Target folder for you where the `HappyModel_ES24TX_2400_TX-<version>.bin` or `HM_ES24TX_Pro_Series_2400_TX-<version>.bin` file is. Do not close this window so you can easily locate the correct file to upload to the module.

Using the [ExpressLRS Lua script] (right-click, save as), select `Wifi Connectivity` then choose `Enable WiFi` and if you have flashed your Tx Module with your Home WiFi Network details or have set it in the Join Network section of the Update Page, it will connect to the local network automatically.

Using your browser, navigate to http://elrs_tx.local and the WiFi Update page should show up. Scroll down towards the Firmware Update section, as shown below:

<figure markdown>
![Firmware Update](/assets/images/web-firmwareupdate.png)
</figure>

Drag-and-drop the `HappyModel_ES24TX_2400_TX-<version>.bin` or `HM_ES24TX_Pro_Series_2400_TX-<version>.bin` file created by the ExpressLRS Configurator into the Choose File field, or manually navigate to the Folder by clicking the `Choose File` button. Once the correct file is selected, click the `Update`. Wait for the process to complete, and the module will reboot (~1min).

Verify the version and hash in the main screen of the ExpressLRS Lua script.

### Метод через домашнюю сеть и конфигуратор

Using the [ExpressLRS Lua script] (right-click, save as), select `Wifi Connectivity` then choose `Enable WiFi` and if you have flashed your Tx Module with your Home WiFi Network details or have set it in the Join Network section of the Update Page, it will connect to the network automatically.

Using the ExpressLRS Configurator, select the correct Target and set your [Firmware Options]. Click **Build and Flash** and wait for the compile process to complete. You should see a section as pictured below and the Success message marking the update process complete.

<figure markdown>
![Build & Flash]
</figure>

<figure markdown>
![Wifi Update Log](/assets/images/WifiUpdateLog.png)
</figure>

Verify the version and hash in the main screen of the ExpressLRS Lua script.

## Прошивка по USB/UART

- Targets:
    - `HappyModel_ES24TX_2400_TX_via_UART`
    - `HM_ES24TX_Pro_Series_2400_TX_via_UART`

- Device Category: 
    - `Happymodel 2.4 GHz`

- Device:
    - `HappyModel ES24TX 2400 TX` for ES24TX (non-Pro), ES24TX Lite, ES24TX Slim
    - `HM ES24TX Pro Series 2400 TX` for ES24TX Pro & Slim Pro

<figure markdown>
![via UART](/assets/images/Method_TX_UART.png)
<figcaption>Flashing via UART</figcaption>
</figure>

This method requires you to move two jumpers or dipswitches into specific pins or positions in the module board. See the following images for the jumper or dipswitch location and which pin/switches should be toggled for this method to work.

<figure markdown>
![JumperFS](/assets/images/jumper-es24Micro.png)
<figcaption>ES24TX Full Size, Non Pro</figcaption>
</figure>

<figure markdown>
![JumperLite](/assets/images/jumper-es24Lite.png)
<figcaption>ES24TX Lite, for Jumper T-Lite</figcaption>
</figure>

<figure markdown>
![DipswitchSlim](/assets/images/dipswitch-es24slim.png)
<figcaption>ES24TX Slim, Iron Man</figcaption>
</figure>

<figure markdown>
![DipswitchSlimPro](/assets/images/dipswitch-es24slimPro.png)
<figcaption>ES24TX Slim Pro</figcaption>
</figure>

<figure markdown>
![DipswitchPro](/assets/images/dipswitch-Pro.png)
<figcaption>ES24TX Pro 1W</figcaption>
</figure>

Attach your USB cable to the module and your computer. [CP210x Drivers](https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers) will have to be installed for this to work properly (Windows). Make sure your computer recognizes the module as a CP210x USB-to-UART Bridge device (check Device Manager; or the Actions section of the ExpressLRS Configurator should show another Com Port with Silabs CP210x designation), otherwise, this method will not work.

!!! tip "Important"
    Check Device Manager on your Windows system before proceeding. Ensure the correct drivers are installed. Some Linux distros might also need drivers. The drivers can be downloaded [here](https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers).

<figure markdown>
![CP210x Drivers](/assets/images/CP210xDriverDownload.png)
</figure>

Using the ExpressLRS Configurator with the correct Target selected and [Firmware Options] set, hit **Build & Flash**. Wait for the process to finish, and you should be greeted with the "Success" message.

<figure markdown>
![Build & Flash]
</figure>

Assemble the module back together (ensure the module PCB is not loose from its mounting points) and attach it to your radio module bay and verify the version and hash in the main screen of the ExpressLRS Lua script.

[ExpressLRS Lua script]: https://github.com/ExpressLRS/ExpressLRS/blob/3.x.x-maintenance/src/lua/elrsV3.lua?raw=true
[Build]: /assets/images/Build.png
[Build & Flash]: /assets/images/BuildFlash.png
[Firmware Options]: ../firmware-options.md
[Radio Preparation]: tx-prep.md
